<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Producto</title>
  <link rel="icon" href="EnmaManualidadesLogo.png">
  <link rel="shortcut icon" href="EnmaManualidadesLogoMini.png">
  <link rel="stylesheet" href="styles.css">
  <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-firestore.js"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background-color: #4d004d;
      color: white;
    }

    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 20px;
      background-color: #4d004d;
    }
    .main-container {
      display: flex;
      gap: 20px;
      padding: 20px;
      justify-content: center;
      align-items: center;
    }

    .preview-container {
      position: relative;
      background-color: #8c004c;
      padding: 20px;
      border-radius: 10px;
      text-align: center;
    }

    .preview {
      position: relative;
      display: inline-block;
    }

    .preview img {
      max-width: 300px;
    }

    .design-preview {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      pointer-events: none;
      width: 100px;
    }

    .control-panel {
      background-color: #8c004c;
      padding: 20px;
      border-radius: 10px;
      width: 300px;
    }

    .control-panel label,
    .control-panel input {
      display: block;
      margin-bottom: 10px;
      width: 100%;
    }

    .control-panel button {
      margin-top: 10px;
      padding: 10px;
      width: 100%;
      background-color: #ff0066;
      border: none;
      color: white;
      border-radius: 5px;
    }

    main {
    display: flex;
    flex-direction: row;
    align-items: center;
    border-radius: 10px;
    flex-wrap: nowrap;
}
.product-detail {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 20px;
  padding: 20px;
  border-radius: 10px;
  background: linear-gradient(95.4deg, rgb(156 100 137) 0%, rgb(156 156 156) 100%);
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
  text-align: center;
  margin: 10px;
  color: black;
}

.logo {
    background-color: transparent;
    border: none;
    cursor: pointer;
    margin-left: 40%;
}
  
.logo img {
    width: 25%;
    height: 100%;
    object-fit: contain;
}
header {
    display: flex;
    justify-content: space-between;
    width: 100%;
    padding: 10px 20px;
    background-color: rgba(0, 0, 0, 0.2);
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
    flex-wrap: nowrap;
    flex-direction: row;
}

.img_producto{

    height: 400px;
    object-fit: cover;
}

#back-to-store {
  background-color: #800080;
  color: white;
  border: none;
  display: flex
;
  justify-content: center;
  align-items: center;
  padding: 10px;
  border-radius: 20px;
  cursor: pointer;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
  transition: background-color 0.3s ease;
}
  
  #back-to-store:hover {
    background-color: #aa00aa;
  }
  
  .cart-icon {
    font-size: 20px;
  }
  
  .tags {
    display: flex;
    gap: 5px;
    justify-content: center;
    margin-top: 10px;
  }
  
  .tag {
    background-color: #800080;
    color: #fff;
    border-radius: 10px;
    padding: 5px 10px;
    font-size: 12px;
  }
  
  .hidden {
    display: none;
  }
  
  /* Carrito */
  #cart-popup {
    position: fixed;
    top: 20%;
    right: 20px;
    background: #fff;
    color: #000;
    width: 300px;
    border-radius: 10px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    padding: 20px;
  }
  
  #cart-popup h3 {
    margin: 0 0 10px;
  }


  .product-container {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    align-items: flex-start;
    gap: 20px;
    padding: 20px;
  }
  
  .product-gallery {
    max-width: 400px;
    text-align: center;
  }
  
  #main-image {
    max-width: 280px;
    border-radius: 10px;
    margin-bottom: 10px;
  }
  
  .thumbnail-gallery {
    display: flex;
    justify-content: center;
    gap: 5px;
  }
  
  .thumbnail-gallery img {
    width: 60px;
    height: 60px;
    object-fit: cover;
    border: 2px solid #fff;
    border-radius: 5px;
    cursor: pointer;
    transition: transform 0.2s, border-color 0.2s;
  }
  
  .thumbnail-gallery img:hover {
    transform: scale(1.1);
    border-color: #ff0066;
  }
  
  .product-info {
    max-width: 400px;
  }
  
  h1 {
    font-size: 24px;
    color: #ff0066;
  }
  
  .price {
    font-size: 20px;
    color: #ffd700;
  }
  
  .cart-button {
    display: inline-block;
    background-color: #ff0066;
    color: white;
    padding: 10px 20px;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    font-size: 16px;
  }
  
  .cart-button:hover {
    background-color: #e6005c;
  }
  
  #cart-modal {
    display: none;
    position: fixed;
    z-index: 1000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: auto;
    color: #000;
    background-color: rgba(0, 0, 0, 0.5);
  }

  .modal-content {
    position: relative;
    background-color: #fff;
    margin: 15% auto;
    padding: 20px;
    border-radius: 10px;
    width: 80%;
    max-width: 500px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
  }

  #close-modal {
    position: absolute;
    top: 10px;
    right: 20px;
    color: #000;
    font-size: 24px;
    font-weight: bold;
    cursor: pointer;
  }

  #close-modal:hover {
    color: #ff0066;
  }

/* Estilos para pantallas grandes */
@media (min-width: 1130px) {
    #filters {
      position: fixed;
      width: 200px;
    }
    #menu-button {
        background-color: transparent;
        border: none;
        cursor: pointer;
      }
      
      #menu-button img {
        width: 20%;
        height: 100%;
        object-fit: contain;
      }
      footer {
        bottom: 0;
        height: 0;
        width: 100%;
        padding: 10px 20px;
        background-color: rgba(0, 0, 0, 0.2);
        box-shadow: 0 -2px 5px rgba(0, 0, 0, 0.2);
        display: flex;
        flex-wrap: wrap;
        flex-direction: row;
        justify-content: space-evenly;
      }
    footer .footer-container {
      display: flex;
      align-items: center;
    }
    footer .footer-logo {
      margin-right: 20px;
    }
    footer .footer-info {
      align-items: center;
      gap: 10px;
    }
    footer .footer-info a {
      color: #fff;
      text-decoration: none;
    }
    footer p {
      margin: 0;
      font-size: 14px;
      color: #fff;
    }
    .iframefootermap{
      display: none;
    }
  }
  
  /* Estilos para pantallas pequeÃ±as */
  @media (max-width: 767px) {
    .logo img {
      width: 45%;
      height: 100%;
      object-fit: contain;
  }
    #filters {
      width: 100%;
      position: relative;
      margin: 10px 10px;
    }
    #menu-button {
        background-color: transparent;
        border: none;
        cursor: pointer;
      }
      
      #menu-button img {
        width: 45%;
        height: 100%;
        object-fit: contain;
      }
      footer {
        bottom: 0;
        height: 0;
        width: 100%;
        padding: 10px 20px;
        background-color: rgba(0, 0, 0, 0.2);
        box-shadow: 0 -2px 5px rgba(0, 0, 0, 0.2);
        display: flex;
        flex-wrap: wrap;
        flex-direction: row;
        justify-content: space-evenly;
      }
    footer .footer-container {
      display: flex;
      align-items: center;
    }
    footer .footer-logo {
      margin-right: 20px;
    }
    footer .footer-info {
      align-items: center;
      gap: 10px;
    }
    footer .footer-info a {
      color: #fff;
      text-decoration: none;
    }
    footer p {
      margin: 0;
      font-size: 14px;
      color: #fff;
    }
    .iframefootermap{
      display: none;
    }

    #products {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      justify-content: center;
      padding: 20px;
      width: 100%;
  }

  #menu-container {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
    padding: 20px;
    border-radius: 10px;
    color: #fff;
    margin-left: 10px;
    margin-right: 10px;
    flex-direction: row;
  
    /* Habilitar scroll pero ocultar la barra */
    overflow-y: scroll; /* Activar desplazamiento vertical */
    max-height: 80vh; /* Limitar la altura mÃ¡xima */
    
    /* Ocultar scroll */
    scrollbar-width: none; /* Para navegadores compatibles (Firefox) */
  }
  
  #menu-container::-webkit-scrollbar {
    display: none; /* Para navegadores basados en WebKit (Chrome, Safari) */
  }

  }

@media screen  and (max-width: 767px) {
  main {
    display: flex;
    flex-direction: column;
    align-items: center;
    border-radius: 10px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    flex-wrap: nowrap;
}
.main-container {
    display: flex;
    gap: 20px;
    justify-content: center;
    align-items: center;
    flex-direction: column-reverse;
    flex-wrap: nowrap;
}
}
  </style>
</head>
<body>
  <header>
    <div id="profile-icon" class="icon">ðŸ‘¤</div>
    <a class="logo" href="/"><img src="EnmaManualidadesLogo.png" alt="Enma Manualidades"></a>
    
  </header>

  <main>
    <div id="product-details"></div>

  
  <div class="main-container">
    <!-- Vista previa -->
    <div class="preview-container">
      <h2>Vista previa</h2>
      <div class="preview">
        <img id="shirt-image" src="camisas.png" alt="Camiseta">
        <img id="design-preview" class="design-preview" src="EnmaManualidadesLogoMini.png" alt="DiseÃ±o">
      </div>
    </div>

    <!-- Controles -->
    <div class="control-panel">
      <h3>Personalizar</h3>
      <label for="upload-design">Subir diseÃ±o (PNG)</label>
      <input type="file" id="upload-design" accept="image/png">
      
      <label for="shirt-color">Color de camiseta</label>
      <select id="shirt-color">
        <option value="shirt-black.png">Negra</option>
        <option value="shirt-white.png">Blanca</option>
        <option value="shirt-blue.png">Azul</option>
      </select>

      <label for="design-size">TamaÃ±o del diseÃ±o (px)</label>
      <input type="range" id="design-size" min="20" max="200" value="150">

      <label for="design-position-x">PosiciÃ³n X (px)</label>
      <input type="range" id="design-position-x" min="0" max="300" value="150">

      <label for="design-position-y">PosiciÃ³n Y (px)</label>
      <input type="range" id="design-position-y" min="0" max="300" value="150">
    </div>
  </div>  
</main>
<div id="cart-modal" class="hidden">
  <div class="modal-content">
    <span id="close-modal">&times;</span>
    <h2>Carrito de compras</h2>
    <p>AquÃ­ irÃ¡ el contenido del carrito.</p>
    <!-- AquÃ­ va el resumen del producto y un botÃ³n de confirmaciÃ³n -->
    <button id="confirm-purchase" class="cart-button">Confirmar compra</button>
  </div>
</div>

<button id="back-to-store">Volver a la tienda</button>
  <footer>
    <iframe class="iframefootermap" src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d410404.8590365639!2d-6.423374270709594!3d36.52304662488185!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x644bb9ec6abaa235%3A0x4fd198efdf8fa5dc!2sEnma%20Manualidades!5e0!3m2!1ses!2ses!4v1702396602259!5m2!1ses!2ses" width="230" height="180" style="border-radius:20px;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
    
    <div class="footer-container">
      <div class="footer-logo">
        <img width="100px" src="EnmaManualidadesLogoMini.png" alt="Enma Manualidades Logo">
      </div>
    </div>


    <nav class="footer-info" >
      <a href="#">Home</a> |
      <a href="#catalogoh2">CatÃ¡logo</a> |
      <a href="EnmaManualidades/HacerUnEncargo.html">Hacer un Encargo</a> |
      <a href="EnmaManualidades/AboutMe.html">About Enma</a>
  </nav>
  
    <div class="footer-info">
      
      <p>&copy; 2024 Enma Manualidades. Todos los derechos reservados.</p>
      <p>DirecciÃ³n: [CÃ¡diz, Spain]</p>
      <p>TelÃ©fono: [+34 642 70 25 29]</p>
      <p>PÃ¡gina Web creada Por: <a href="https://github.com/AgustinBeniteez" target="_blank">Agustin benitez</a></p>
    </div>
  </footer>
  <script>
    // Leer el ID del producto desde la URL
    const productId = window.location.hash.slice(9); // Obtener el ID del producto (#productoX)
    const productDetailsContainer = document.getElementById("product-details");
    const backToStoreButton = document.getElementById("back-to-store");
  
    let products = [];
  
    // Cargar productos desde el archivo JSON
    fetch("productos.json")
      .then((response) => {
        if (!response.ok) {
          throw new Error("Error al cargar el archivo JSON");
        }
        return response.json();
      })
      .then((data) => {
        products = data;
        renderProductDetails(productId);
      })
      .catch((error) => {
        console.error("Hubo un problema con la carga del JSON:", error);
      });
  
    function renderProductDetails(id) {
      const product = products.find(p => p.id == id);
  
      if (product) {
        // Cambiar el tÃ­tulo del HTML
        document.title = product.title;
  
        // Actualizar las etiquetas meta
        updateMetaTags(product);
  
        const productDetails = document.getElementById("product-details");
  
        // Limpiar contenido previo
        productDetails.innerHTML = "";
  
        // Crear HTML dinÃ¡micamente
        productDetails.innerHTML = `
          <div class="product-container">
            <div class="product-gallery">
              <img id="main-image" src="${product.shirtImageUrl}" alt="Camiseta principal">
              <div class="thumbnail-gallery"></div>
            </div>
            <div class="product-info">
              <h1 id="product-title">${product.title}</h1>
              <p id="product-description">${product.description}</p>
              <p id="product-price" class="price">${product.price}â‚¬</p>
              <button id="add-to-cart-button" class="cart-button">
                <i class="fas fa-shopping-cart"></i> Comprar
              </button>
            </div>
          </div>
        `;
  
        // Manejar miniaturas dinÃ¡micamente
        const thumbnailGallery = productDetails.querySelector(".thumbnail-gallery");
  
        product.thumbnails.forEach(src => {
          const img = document.createElement("img");
          img.src = src;
          img.alt = "Miniatura";
          img.addEventListener("click", () => {
            document.getElementById("main-image").src = src;
          });
          thumbnailGallery.appendChild(img);
        });
  
        // Agregar evento para el botÃ³n de carrito
        const addToCartButton = document.getElementById("add-to-cart-button");
        addToCartButton.addEventListener("click", () => {
          cartModal.style.display = "block";
          // Llenar automÃ¡ticamente los campos del formulario con el producto actual
          document.getElementById("product-name").value = product.title;
        });
      }
    }
  
    function updateMetaTags(product) {
      // Actualizar meta descripciÃ³n
      let metaDescription = document.querySelector('meta[name="description"]');
      if (!metaDescription) {
        metaDescription = document.createElement("meta");
        metaDescription.name = "description";
        document.head.appendChild(metaDescription);
      }
      metaDescription.content = product.description;
  
      // Actualizar Open Graph (OG) tags
      let ogTitle = document.querySelector('meta[property="og:title"]');
      if (!ogTitle) {
        ogTitle = document.createElement("meta");
        ogTitle.setAttribute("property", "og:title");
        document.head.appendChild(ogTitle);
      }
      ogTitle.content = product.title;
  
      let ogDescription = document.querySelector('meta[property="og:description"]');
      if (!ogDescription) {
        ogDescription = document.createElement("meta");
        ogDescription.setAttribute("property", "og:description");
        document.head.appendChild(ogDescription);
      }
      ogDescription.content = product.description;
  
      let ogImage = document.querySelector('meta[property="og:image"]');
      if (!ogImage) {
        ogImage = document.createElement("meta");
        ogImage.setAttribute("property", "og:image");
        document.head.appendChild(ogImage);
      }
      ogImage.content = product.imgUrl;
  
      // Actualizar Twitter meta tags
      let twitterTitle = document.querySelector('meta[name="twitter:title"]');
      if (!twitterTitle) {
        twitterTitle = document.createElement("meta");
        twitterTitle.name = "twitter:title";
        document.head.appendChild(twitterTitle);
      }
      twitterTitle.content = product.title;
  
      let twitterDescription = document.querySelector('meta[name="twitter:description"]');
      if (!twitterDescription) {
        twitterDescription = document.createElement("meta");
        twitterDescription.name = "twitter:description";
        document.head.appendChild(twitterDescription);
      }
      twitterDescription.content = product.description;
  
      let twitterImage = document.querySelector('meta[name="twitter:image"]');
      if (!twitterImage) {
        twitterImage = document.createElement("meta");
        twitterImage.name = "twitter:image";
        document.head.appendChild(twitterImage);
      }
      twitterImage.content = product.imgUrl;
    }
  
    // Modal para carrito con formulario personalizado
    const cartModal = document.createElement("div");
    cartModal.id = "cart-modal";
    cartModal.innerHTML = `
      <div class="modal-content">
        <span id="close-modal">&times;</span>
        <h2>Carrito de compras</h2>
        <p>Tu producto ha sido aÃ±adido al carrito.</p>
        <form action="https://formspree.io/f/mbljenpz" method="POST">
          <label>
            Producto:
            <input type="text" name="product" id="product-name" readonly>
          </label>
          <label>
            Cantidad:
            <input type="number" name="quantity" id="quantity" value="1" min="1" required>
          </label>
          <label>
            NÃºmero de telÃ©fono:
            <input type="tel" name="phone" id="phone" required>
          </label>
          <label>
            Provincia:
            <input type="text" name="province" id="province" required>
          </label>
          <label>
            Ciudad:
            <input type="text" name="city" id="city" required>
          </label>
          <button type="submit">Confirmar compra</button>
        </form>
      </div>
    `;
    document.body.appendChild(cartModal);
  
    const closeModal = document.getElementById("close-modal");
  
    // Cerrar modal
    closeModal?.addEventListener("click", () => {
      cartModal.style.display = "none";
    });
  
    window.addEventListener("click", (event) => {
      if (event.target === cartModal) {
        cartModal.style.display = "none";
      }
    });
  
    // Volver a la tienda
    backToStoreButton.addEventListener('click', () => {
      window.location.href = "index.html";  // Redirigir a la pÃ¡gina principal
    });
  
    const shirtImage = document.getElementById("shirt-image");
    const designPreview = document.getElementById("design-preview");
    const shirtColor = document.getElementById("shirt-color");
    const designSize = document.getElementById("design-size");
    const designPositionX = document.getElementById("design-position-x");
    const designPositionY = document.getElementById("design-position-y");
    const uploadDesign = document.getElementById("upload-design");
  
    // Cambiar color de la camiseta
    shirtColor.addEventListener("change", (e) => {
      shirtImage.src = e.target.value;
    });
  
    // Cambiar tamaÃ±o del diseÃ±o
    designSize.addEventListener("input", (e) => {
      designPreview.style.width = e.target.value + "px";
    });
  
    // Cambiar posiciÃ³n del diseÃ±o
    designPositionX.addEventListener("input", (e) => {
      designPreview.style.left = e.target.value + "px";
    });
  
    designPositionY.addEventListener("input", (e) => {
      designPreview.style.top = e.target.value + "px";
    });
  
    // Cargar diseÃ±o personalizado
    uploadDesign.addEventListener("change", (e) => {
      const file = e.target.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = (event) => {
          designPreview.src = event.target.result;
          designPreview.style.width = "100px"; // TamaÃ±o predeterminado mÃ¡s pequeÃ±o
        };
  
        reader.readAsDataURL(file);
      }
    });
  </script>
</body>
</html>
